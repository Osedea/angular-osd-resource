"use strict";!function(){angular.module("osdResource",["ngLodash"])}(),function(){var e=angular.module("osdResource");e.config(["$provide",function(n){e.register={factory:n.factory,decorator:n.decorator}}]),e.provider("ResourceConfig",function(){var e=this,n=[],r={decorators:[],methods:{}};return e.add=function(a,o,t){return t=t||{},t.name=a,t.route=o,t.decorators=t.decorators||[],t.methods=t.methods||{},t.relations=t.relations||[],t.decorators=t.decorators.concat(r.decorators),angular.extend(t.methods,r.methods),n.push(t),e},e.global=function(n){return r=n,e},e.$get=function(){return n},e})}(),function(){function e(e){return function(n){var r=this;r.config=e;var a={query:{method:"GET",isArray:!1},update:{method:"PUT"}};return angular.extend(a,e.methods),angular.forEach(r.config.relations,function(e){a[e]={method:"GET",isArray:!0,url:r.config.route+"/"+e}}),r.resource=n(e.route,{id:"@id"},a),angular.forEach(Object.keys(e.methods),function(e){r[e]=function(n){return r.resource[e](n).$promise}}),angular.forEach(r.config.relations,function(e){r[e]=function(n){return r.resource[e](n).$promise}}),r.save=function(e){return r.resource.save(e).$promise},r.update=function(e){return r.resource.update(e).$promise},r.get=function(e){return r.resource.get(e).$promise},r.query=function(e){return r.resource.query(e).$promise},r["delete"]=function(e){return r.resource["delete"]({id:e}).$promise},r}}var n=angular.module("osdResource");n.run(["ResourceConfig",function(r){angular.forEach(r,function(r){n.register.factory(r.name,["$resource",e(r)])})}])}(),function(){function e(e,n){function r(){return u.caches[e.config.name]={},angular.forEach(c,function(n){u.caches[e.config.name][n]={cached:!1,params:null,data:null}}),u.caches[e.config.name]}function a(a,o,t){var c=u.caches[e.config.name];if(c||(c=r()),!t&&c[a].cached&&n.isEqual(o,c[a].params))return c[a].data;c[a].cached=!0,c[a].params=o;var i=e[a](o).then(function(e){return e});return c[a].data=i,i}function o(n,a){var o=u.caches[e.config.name];return o||(o=r()),o.get.cached=!1,o.query.cached=!1,e[n](a)}var t={},u={caches:{}},c=["get","query"],i=["save","update","delete"];return angular.extend(t,e),c=c.concat(e.config.relations),angular.forEach(c,function(e){t[e]=function(n,r){return a(e,n,r)}}),angular.forEach(i,function(e){t[e]=function(n){return o(e,n)}}),t}var n=angular.module("osdResource");e.$inject=["$delegate","lodash"],n.run(["ResourceConfig",function(r){angular.forEach(r,function(r){angular.forEach(r.decorators,function(a){"cache"==a&&n.register.decorator(r.name,e)})})}])}(),function(){function e(e){var n={};return n.paginationStates||(n.paginationStates={}),angular.extend(n,e),n.paginationStates[e.config.name]={page:1,perPage:null},n.query=function(r){return r=r||{},angular.extend(r,n.paginationStates[e.config.name]),e.query(r)},n.prevPage=function(r){n.paginationStates[e.config.name].page--,n.query(r)},n.nextPage=function(r){n.paginationStates[e.config.name].page++,n.query(r)},n.perPage=function(r){return n.paginationStates[e.config.name].perPage=r,n},n.page=function(r){return n.paginationStates[e.config.name].page=r,n},n}var n=angular.module("osdResource");e.$inject=["$delegate"],n.run(["ResourceConfig",function(r){angular.forEach(r,function(r){angular.forEach(r.decorators,function(a){"paginate"==a&&n.register.decorator(r.name,e)})})}])}();