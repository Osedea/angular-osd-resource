"use strict";!function(){angular.module("osdResource",["ngLodash"])}(),function(){var e=angular.module("osdResource");e.config(["$provide",function(n){e.register={factory:n.factory,decorator:n.decorator}}]),e.provider("ResourceConfig",function(){var e=this,n=[],t={decorators:[],methods:{}};return e.add=function(o,r,a){return a=a||{},a.name=o,a.route=r,a.decorators=a.decorators||[],a.methods=a.methods||{},a.relations=a.relations||[],a.decorators=a.decorators.concat(t.decorators),angular.extend(a.methods,t.methods),n.push(a),e},e.global=function(n){return t=n,e},e.$get=function(){return n},e})}(),function(){function e(e){return function(n,t){var o=this;o.config=e;var r={query:{method:"GET",isArray:!1},update:{method:"PUT"}};return t.assign(r,e.methods),t.forEach(o.config.relations,function(e){r[e]={method:"GET",isArray:!0,url:o.config.route+"/"+e}}),o.resource=n(e.route,{id:"@id"},r),t.forEach(Object.keys(e.methods),function(e){o[e]=function(n){return o.resource[e](n).$promise}}),t.forEach(o.config.relations,function(e){o[e]=function(n){return o.resource[e](n).$promise}}),o.save=function(e,n,t){return o.resource.save(e,n,t).$promise},o.update=function(e,n,t){return o.resource.update(e,n,t).$promise},o.get=function(e,n,t){return o.resource.get(e,n,t).$promise},o.query=function(e,n,t){return o.resource.query(e,n,t).$promise},o["delete"]=function(e,n,t){return o.resource["delete"]({id:e},n,t).$promise},o}}var n=angular.module("osdResource");n.run(["ResourceConfig","lodash",function(t,o){o.forEach(t,function(t){n.register.factory(t.name,["$resource","lodash",e(t)])})}])}(),function(){function e(e,n){function t(){return c.caches[e.config.name]={},n.forEach(u,function(n){c.caches[e.config.name][n]={cached:!1,params:null,data:null}}),c.caches[e.config.name]}function o(o,r,a){var u=c.caches[e.config.name];if(u||(u=t()),!a&&u[o].cached&&n.isEqual(r,u[o].params))return u[o].data;u[o].cached=!0,u[o].params=r;var i=e[o](r).then(function(e){return e});return u[o].data=i,i}function r(n,o){var r=c.caches[e.config.name];return r||(r=t()),r.get.cached=!1,r.query.cached=!1,e[n](o)}var a={},c={caches:{}},u=["get","query"],i=["save","update","delete"];return n.extend(a,e),u=u.concat(e.config.relations),n.forEach(u,function(e){a[e]=function(n,t){return o(e,n,t)}}),n.forEach(i,function(e){a[e]=function(n){return r(e,n)}}),a}var n=angular.module("osdResource");e.$inject=["$delegate","lodash"],n.run(["ResourceConfig","lodash",function(t,o){o.forEach(t,function(t){o.forEach(t.decorators,function(o){"cache"==o&&n.register.decorator(t.name,e)})})}])}(),function(){function e(e,n){var t={},o=["page","perPage"];return t.paginationStates||(t.paginationStates={}),n.assign(t,e),t.paginationStates[e.config.name]={page:1,perPage:null,totalCount:0,totalPage:0},t.query=function(r){r=r||{};var a=t.paginationStates[e.config.name];return n.assign(r,n.pick(a,o)),e.query(r,function(e,n){a.totalCount=n("x-total-count"),a.totalPages=n("x-total-pages")})},t.prevPage=function(n){return t.paginationStates[e.config.name].page--,t.query(n)},t.nextPage=function(n){return t.paginationStates[e.config.name].page++,t.query(n)},t.perPage=function(n){return t.paginationStates[e.config.name].perPage=n,t},t.page=function(n){return t.paginationStates[e.config.name].page=n,t},t.getTotalPage=function(){return t.paginationStates[e.config.name].totalPage},t.getTotalCount=function(){return t.paginationStates[e.config.name].totalCount},t.hasMore=function(){return t.paginationStates[e.config.name].totalPage>t.paginationStates[e.config.name].page},t}var n=angular.module("osdResource");e.$inject=["$delegate","lodash"],n.run(["ResourceConfig","lodash",function(t,o){o.forEach(t,function(t){o.forEach(t.decorators,function(o){"paginate"==o&&n.register.decorator(t.name,e)})})}])}();