"use strict";!function(){angular.module("osdResource",["ngLodash","ngResource"])}(),function(){var n=angular.module("osdResource");n.config(["$provide",function(e){n.register={factory:e.factory,decorator:e.decorator}}]),n.provider("ResourceConfig",function(){var n=this,e=[],o={decorators:[],methods:{}};return n.add=function(t,r,a){return a=a||{},a.name=t,a.route=r,a.decorators=a.decorators||[],a.methods=a.methods||{},a.relations=a.relations||[],a.decorators=a.decorators.concat(o.decorators),angular.extend(a.methods,o.methods),e.push(a),n},n.global=function(e){return o=e,n},n.$get=function(){return e},n})}(),function(){function n(n){return function(e,o){var t=this;t.config=n;var r={query:{method:"GET",isArray:!1},update:{method:"PUT"}};return o.assign(r,n.methods),o.forEach(t.config.relations,function(n){r[n]={method:"GET",isArray:!0,url:t.config.route+"/"+n}}),t.resource=e(n.route,{id:"@id"},r),o.forEach(Object.keys(n.methods),function(n){t[n]=function(e){return t.resource[n](e).$promise}}),o.forEach(t.config.relations,function(n){t[n]=function(e){return t.resource[n](e).$promise}}),t.save=function(n,e,o){return t.resource.save({},n,e,o).$promise},t.update=function(n,e,o){return t.resource.update({},n,e,o).$promise},t.get=function(n,e,o){return t.resource.get(n,e,o).$promise},t.query=function(n,e,o){return t.resource.query(n,e,o).$promise},t["delete"]=function(n,e,o){return t.resource["delete"]({id:n},e,o).$promise},t}}var e=angular.module("osdResource");e.run(["ResourceConfig","lodash",function(o,t){t.forEach(o,function(o){e.register.factory(o.name,["$resource","lodash",n(o)])})}])}(),function(){function n(n,e,o){function t(n){var e=[];return o.forIn(n,function(n,o){e.push(o+":"+n)}),e.join("&")}function r(n){for(var e=0,o=n.length,t=0;o>t;t++)e=31*e+n.charCodeAt(t);return e}function a(n){return s.caches[e.config.name]={},o.forEach(f,function(o){s.caches[e.config.name][o]={},s.caches[e.config.name][o][n]={cached:!1,params:null,data:null}}),s.caches[e.config.name]}function c(n,o){var c=s.caches[e.config.name],u=r(t(o));if(c&&c[n]&&c[n][u]||(c=a(u)),!d&&c[n][u].cached)return c[n][u].data;c[n][u].cached=!0,c[n][u].params=o;var i=e[n](o).then(function(n){return n});return c[n][u].data=i,d=!1,i}function u(n,t){var r=s.caches[e.config.name];return r||(r=a()),o.forEach(r.get,function(n){n.cached=!1}),o.forEach(r.query,function(n){n.cached=!1}),e[n](t)}var i={},s={caches:{}},f=["get","query"],g=["save","update","delete"],d=!1;return o.extend(i,e),f=f.concat(e.config.relations),i.clearCache=function(){s.caches[e.config.name]={}},i.setForced=function(){return d=!0,i},o.forEach(f,function(n){i[n]=function(e){return c(n,e)}}),o.forEach(g,function(n){i[n]=function(e){return u(n,e)}}),i}var e=angular.module("osdResource");n.$inject=["$rootScope","$delegate","lodash"],e.run(["ResourceConfig","lodash",function(o,t){t.forEach(o,function(o){t.forEach(o.decorators,function(t){"cache"==t&&e.register.decorator(o.name,n)})})}])}(),function(){function n(n,e){var o={},t=["page","perPage"];return o.paginationStates||(o.paginationStates={}),e.assign(o,n),o.paginationStates[n.config.name]={page:1,perPage:null,totalCount:0,totalPage:0},o.query=function(r){r=r||{};var a=o.paginationStates[n.config.name];return e.assign(r,e.pick(a,t)),n.query(r,function(n,e){a.totalCount=e("x-total-count"),a.totalPages=e("x-total-pages")})},o.prevPage=function(e){return o.paginationStates[n.config.name].page--,o.query(e)},o.nextPage=function(e){return o.paginationStates[n.config.name].page++,o.query(e)},o.perPage=function(e){return o.paginationStates[n.config.name].perPage=e,o},o.page=function(e){return o.paginationStates[n.config.name].page=e,o},o.getTotalPage=function(){return o.paginationStates[n.config.name].totalPage},o.getTotalCount=function(){return o.paginationStates[n.config.name].totalCount},o.hasMore=function(){return o.paginationStates[n.config.name].totalPage>o.paginationStates[n.config.name].page},o}var e=angular.module("osdResource");n.$inject=["$delegate","lodash"],e.run(["ResourceConfig","lodash",function(o,t){t.forEach(o,function(o){t.forEach(o.decorators,function(t){"paginate"==t&&e.register.decorator(o.name,n)})})}])}();