"use strict";!function(){angular.module("osdResource",["ngLodash","ngResource"])}(),function(){var n=angular.module("osdResource");n.config(["$provide",function(e){n.register={factory:e.factory,decorator:e.decorator}}]),n.provider("ResourceConfig",function(){var n=this,e=[],o={decorators:[],methods:{}};return n.add=function(t,r,a){return a=a||{},a.name=t,a.route=r,a.decorators=a.decorators||[],a.methods=a.methods||{},a.relations=a.relations||[],a.decorators=a.decorators.concat(o.decorators),angular.extend(a.methods,o.methods),e.push(a),n},n.global=function(e){return o=e,n},n.$get=function(){return e},n})}(),function(){function n(n){return function(e,o){var t=this;t.config=n;var r={query:{method:"GET",isArray:!1},update:{method:"PUT"}};return o.assign(r,n.methods),o.forEach(t.config.relations,function(n){r[n]={method:"GET",isArray:!0,url:t.config.route+"/"+n}}),t.resource=e(n.route,{id:"@id"},r),o.forEach(Object.keys(n.methods),function(n){t[n]=function(e){return t.resource[n](e).$promise}}),o.forEach(t.config.relations,function(n){t[n]=function(e){return t.resource[n](e).$promise}}),t.save=function(n,e,o){return t.resource.save({},n,e,o).$promise},t.update=function(n,e,o){return t.resource.update({},n,e,o).$promise},t.get=function(n,e,o){return t.resource.get(n,e,o).$promise},t.query=function(n,e,o){return t.resource.query(n,e,o).$promise},t["delete"]=function(n,e,o){return t.resource["delete"]({id:n},e,o).$promise},t}}var e=angular.module("osdResource");e.run(["ResourceConfig","lodash",function(o,t){t.forEach(o,function(o){e.register.factory(o.name,["$resource","lodash",n(o)])})}])}(),function(){function n(n,e){function o(n){var o=[];return e.forIn(n,function(n,e){o.push(e+":"+n)}),o.join("&")}function t(n){for(var e=0,o=n.length,t=0;o>t;t++)e=31*e+n.charCodeAt(t);return e}function r(o){return i.caches[n.config.name]={},e.forEach(s,function(e){i.caches[n.config.name][e]={},i.caches[n.config.name][e][o]={cached:!1,params:null,data:null}}),i.caches[n.config.name]}function a(e,a){var c=i.caches[n.config.name],u=t(o(a));if(c&&c[e]&&c[e][u]||(c=r(u)),!g&&c[e][u].cached)return c[e][u].data;c[e][u].cached=!0,c[e][u].params=a;var s=n[e](a).then(function(n){return n});return c[e][u].data=s,g=!1,s}function c(o,t){var a=i.caches[n.config.name];return a||(a=r()),e.forEach(a.get,function(n){n.cached=!1}),e.forEach(a.query,function(n){n.cached=!1}),n[o](t)}var u={},i={caches:{}},s=["get","query"],f=["save","update","delete"],g=!1;return e.extend(u,n),s=s.concat(n.config.relations),u.clearCache=function(){i.caches[n.config.name]={}},u.setForced=function(){return g=!0,u},e.forEach(s,function(n){u[n]=function(e){return a(n,e)}}),e.forEach(f,function(n){u[n]=function(e){return c(n,e)}}),u}var e=angular.module("osdResource");n.$inject=["$delegate","lodash"],e.run(["ResourceConfig","lodash",function(o,t){t.forEach(o,function(o){t.forEach(o.decorators,function(t){"cache"==t&&e.register.decorator(o.name,n)})})}])}(),function(){function n(n,e){var o={},t=["page","perPage"];return o.paginationStates||(o.paginationStates={}),e.assign(o,n),o.paginationStates[n.config.name]={page:1,perPage:null,totalCount:0,totalPage:0},o.query=function(r){r=r||{};var a=o.paginationStates[n.config.name];return e.assign(r,e.pick(a,t)),n.query(r,function(n,e){a.totalCount=e("x-total-count"),a.totalPages=e("x-total-pages")})},o.prevPage=function(e){return o.paginationStates[n.config.name].page--,o.query(e)},o.nextPage=function(e){return o.paginationStates[n.config.name].page++,o.query(e)},o.perPage=function(e){return o.paginationStates[n.config.name].perPage=e,o},o.page=function(e){return o.paginationStates[n.config.name].page=e,o},o.getTotalPage=function(){return o.paginationStates[n.config.name].totalPage},o.getTotalCount=function(){return o.paginationStates[n.config.name].totalCount},o.hasMore=function(){return o.paginationStates[n.config.name].totalPage>o.paginationStates[n.config.name].page},o}var e=angular.module("osdResource");n.$inject=["$delegate","lodash"],e.run(["ResourceConfig","lodash",function(o,t){t.forEach(o,function(o){t.forEach(o.decorators,function(t){"paginate"==t&&e.register.decorator(o.name,n)})})}])}();